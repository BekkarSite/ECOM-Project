RewriteEngine On

# Ensure directory request loads public/index.php by default
# Works for http://localhost/ECOM-Project and http://localhost/ECOM-Project/
DirectoryIndex public/index.php index.php index.html

# Admin shortcut: /admin -> /admin/dashboard.php (place before -d check)
RewriteRule ^admin/?$ admin/dashboard.php [L,QSA]

# Serve existing files or directories directly (assets, images, etc.)
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Home route
RewriteRule ^$ public/index.php [L,QSA]

# Clean URL for a single product by ID: /product/123
RewriteRule ^product/([0-9]+)/?$ public/product.php?id=$1 [L,QSA]

# Map bare slugs (e.g., /products, /cart, /login) to public/*.php
# Example: /products -> public/products.php
RewriteRule ^([A-Za-z0-9_-]+)/?$ public/$1.php [L,QSA]

# Also allow links that include .php at the root
# Example: /products.php -> public/products.php
RewriteRule ^([A-Za-z0-9_-]+)\.php$ public/$1.php [L,QSA]
